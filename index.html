<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>R√©visions SVT ‚Äì Tectonique / S√©ismes / Volcans (TDAH friendly)</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#121a33;
      --panel2:#0f1730;
      --text:#e8ecff;
      --muted:#aab4e6;
      --ok:#36d399;
      --bad:#fb7185;
      --warn:#fbbf24;
      --accent:#7c3aed;
      --accent2:#22c55e;
      --border:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --focus: 0 0 0 3px rgba(124,58,237,.45);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background: radial-gradient(1000px 700px at 20% 10%, rgba(124,58,237,.25), transparent 60%),
                  radial-gradient(900px 700px at 80% 20%, rgba(34,197,94,.20), transparent 55%),
                  linear-gradient(180deg, #070a14 0%, var(--bg) 100%);
      min-height:100vh;
    }
    a{color:inherit}
    header{
      position:sticky; top:0;
      backdrop-filter: blur(10px);
      background: rgba(7,10,20,.65);
      border-bottom:1px solid var(--border);
      z-index:10;
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px 18px}
    .top{
      display:flex; gap:14px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .title{
      display:flex; align-items:center; gap:12px;
    }
    .badge{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(34,197,94,.85));
      box-shadow: var(--shadow);
      display:grid; place-items:center;
      font-weight:900;
    }
    h1{font-size:18px;margin:0}
    .sub{font-size:13px;color:var(--muted);margin-top:2px}
    .controls{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    }
    button, .chip, select, input{
      font-family:inherit;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      box-shadow: none;
      transition:.15s transform, .15s background, .15s border;
    }
    button:hover, .chip:hover{transform: translateY(-1px); background: rgba(255,255,255,.09)}
    button:active{transform: translateY(0px)}
    button:focus, select:focus, input:focus, .chip:focus{outline:none; box-shadow: var(--focus)}
    button.primary{
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(124,58,237,.55));
      border-color: rgba(124,58,237,.55);
    }
    button.good{
      background: linear-gradient(135deg, rgba(34,197,94,.95), rgba(34,197,94,.55));
      border-color: rgba(34,197,94,.55);
    }
    button.warn{
      background: linear-gradient(135deg, rgba(251,191,36,.95), rgba(251,191,36,.55));
      border-color: rgba(251,191,36,.55);
    }
    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:14px;
      padding:16px 18px 26px;
      max-width:1100px; margin:0 auto;
    }
    @media (max-width: 960px){
      .grid{grid-template-columns: 1fr}
    }
    nav{
      position:sticky; top:94px;
      align-self:start;
    }
    .panel{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(18,26,51,.85), rgba(10,16,34,.85));
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      overflow:hidden;
    }
    .panel .phead{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.03);
    }
    .panel .pbody{padding:14px}
    .navbtn{
      width:100%;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      cursor:pointer;
      text-align:left;
      margin:8px 0;
      padding:12px 12px;
    }
    .navbtn .left{display:flex; gap:10px; align-items:center}
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: rgba(255,255,255,.20);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.08);
    }
    .navbtn.active{
      background: rgba(124,58,237,.20);
      border-color: rgba(124,58,237,.55);
    }
    .navbtn.active .dot{background: rgba(124,58,237,.95)}
    .small{font-size:12px;color:var(--muted)}
    .statrow{
      display:grid; grid-template-columns: 1fr 1fr;
      gap:10px; margin-top:10px;
    }
    .stat{
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius: 14px;
      background: rgba(255,255,255,.04);
    }
    .stat b{display:block;font-size:16px}
    main .panel{min-height:520px}
    .sectionTitle{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px;
      border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.03);
    }
    .sectionTitle h2{margin:0;font-size:16px}
    .sectionTitle .hint{font-size:12px;color:var(--muted)}
    .content{padding:16px}
    .card{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius);
      padding:14px;
      margin:12px 0;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      font-size:12px; color:var(--muted);
    }
    .pill .k{color:var(--text); font-weight:700}
    .hr{height:1px;background: var(--border); margin:14px 0}
    .ok{color:var(--ok); font-weight:700}
    .bad{color:var(--bad); font-weight:700}
    .muted{color:var(--muted)}
    .two{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px;
    }
    @media (max-width: 720px){ .two{grid-template-columns: 1fr} }
    .flash{
      min-height:170px;
      display:grid;
      place-items:center;
      text-align:center;
      cursor:pointer;
      user-select:none;
      background: radial-gradient(700px 250px at 30% 30%, rgba(124,58,237,.16), transparent 60%),
                  radial-gradient(700px 250px at 70% 50%, rgba(34,197,94,.12), transparent 60%),
                  rgba(255,255,255,.04);
    }
    .flash .front{font-size:18px;font-weight:800}
    .flash .back{font-size:15px;line-height:1.35}
    .flash small{display:block;margin-top:8px;color:var(--muted);font-weight:600}
    .quizQ{font-weight:800;margin:0 0 10px}
    .opts{display:grid; gap:10px}
    .opt{
      display:flex; align-items:flex-start; gap:10px;
      padding:10px 12px; border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      cursor:pointer;
    }
    .opt:hover{background: rgba(255,255,255,.06)}
    .opt input{margin-top:3px}
    .feedback{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      font-size:14px;
    }
    .dragWrap{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 820px){ .dragWrap{grid-template-columns:1fr} }
    .bin{
      border:1px dashed rgba(255,255,255,.22);
      border-radius: var(--radius);
      background: rgba(255,255,255,.03);
      padding:12px;
      min-height:150px;
    }
    .bin h3{margin:0 0 8px;font-size:14px;color:var(--muted);font-weight:800}
    .tag{
      display:inline-flex;
      margin:6px 6px 0 0;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      cursor:grab;
      user-select:none;
      font-size:13px;
    }
    .tag:active{cursor:grabbing}
    .tag.good{border-color: rgba(34,197,94,.55); background: rgba(34,197,94,.12)}
    .tag.bad{border-color: rgba(251,113,133,.55); background: rgba(251,113,133,.12)}
    .calcGrid{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 820px){ .calcGrid{grid-template-columns:1fr} }
    .calc input{width:100%; padding:12px 12px; font-size:15px}
    .calc .eq{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:14px; color: var(--muted); background: rgba(0,0,0,.18); border:1px solid var(--border);
      padding:10px 12px;border-radius:14px
    }
    .orderItem{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:14px;
      background: rgba(255,255,255,.04);
      margin:10px 0;
    }
    .orderItem .name{font-weight:800}
    .orderItem .btns{display:flex; gap:8px}
    .toast{
      position:fixed; right:14px; bottom:14px;
      background: rgba(18,26,51,.92);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: 16px;
      padding:12px 14px;
      max-width: 360px;
      z-index: 100;
      opacity:0;
      transform: translateY(10px);
      pointer-events:none;
      transition:.18s ease;
    }
    .toast.show{opacity:1; transform: translateY(0px)}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New";
      font-size: 12px;
      border:1px solid var(--border);
      padding:2px 6px;
      border-radius: 8px;
      color: var(--muted);
      background: rgba(0,0,0,.20);
    }
    .progressBar{
      height:10px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .progressBar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(124,58,237,.95), rgba(34,197,94,.85));
      transition: width .25s ease;
    }
    .mini{
      font-size:12px;color:var(--muted)
    }
    footer{
      text-align:center;
      padding:18px 12px 28px;
      color: var(--muted);
      font-size: 12px;
    }
    .shake{animation: shake .28s linear}
    @keyframes shake{
      0%{transform:translateX(0)}
      25%{transform:translateX(-6px)}
      50%{transform:translateX(6px)}
      75%{transform:translateX(-4px)}
      100%{transform:translateX(0)}
    }
    .confetti{
      position:fixed; inset:0; pointer-events:none; z-index:200;
    }
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="top">
      <div class="title">
        <div class="badge" aria-hidden="true">SVT</div>
        <div>
          <h1>R√©visions interactives ‚Äì Tectonique / S√©ismes / Volcans</h1>
          <div class="sub">Objectif : apprendre vite, par petites doses, avec corrections imm√©diates ‚úÖ</div>
        </div>
      </div>

      <div class="controls">
        <span class="pill" title="Raccourcis clavier">
          <span class="k">Astuce</span> : <span class="kbd">N</span> page suivante ¬∑ <span class="kbd">P</span> pr√©c√©dente ¬∑ <span class="kbd">R</span> reset
        </span>
        <button class="warn" id="btnReset" type="button">Reset</button>
        <button class="primary" id="btnBoost" type="button" title="Mode ultra simple (moins de texte)">
          Mode Focus
        </button>
      </div>
    </div>
  </div>
</header>

<div class="grid">
  <nav class="panel" aria-label="Navigation">
    <div class="phead">
      <b>Menu</b>
      <div class="small">Choisis 1 activit√©, puis joue üî•</div>
      <div class="statrow">
        <div class="stat">
          <span class="small">Score total</span>
          <b id="scoreTotal">0</b>
        </div>
        <div class="stat">
          <span class="small">S√©ries</span>
          <b id="streak">0</b>
        </div>
      </div>
      <div style="margin-top:10px">
        <div class="mini">Progression</div>
        <div class="progressBar" aria-label="Barre de progression">
          <div id="progressFill"></div>
        </div>
        <div class="mini" id="progressText" style="margin-top:6px">0 / 30 objectifs</div>
      </div>
    </div>
    <div class="pbody">
      <button class="navbtn active" data-view="memo" type="button">
        <span class="left"><span class="dot"></span> M√©mo express</span><span class="small">2 min</span>
      </button>
      <button class="navbtn" data-view="flash" type="button">
        <span class="left"><span class="dot"></span> Flashcards</span><span class="small">tap</span>
      </button>
      <button class="navbtn" data-view="quiz" type="button">
        <span class="left"><span class="dot"></span> Quiz</span><span class="small">QCM</span>
      </button>
      <button class="navbtn" data-view="match" type="button">
        <span class="left"><span class="dot"></span> Associer</span><span class="small">drag</span>
      </button>
      <button class="navbtn" data-view="calc" type="button">
        <span class="left"><span class="dot"></span> Calculs</span><span class="small">rapide</span>
      </button>
      <button class="navbtn" data-view="order" type="button">
        <span class="left"><span class="dot"></span> Puzzle ordre</span><span class="small">chrono</span>
      </button>
      <button class="navbtn" data-view="boss" type="button">
        <span class="left"><span class="dot"></span> Boss final</span><span class="small">mix</span>
      </button>

      <div class="hr"></div>

      <div class="card">
        <b>Objectifs ‚ÄúTDAH friendly‚Äù</b>
        <ul class="muted" style="margin:8px 0 0; padding-left:18px; line-height:1.55">
          <li>Petites √©tapes ‚úÖ</li>
          <li>Corrections imm√©diates ‚úÖ</li>
          <li>On joue + on retient ‚úÖ</li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="panel" id="main">
    <!-- VIEW: MEMO -->
    <section class="view" id="view-memo">
      <div class="sectionTitle">
        <h2>M√©mo express (√† lire 2 minutes)</h2>
        <div class="hint">Objectif : retenir les 10 phrases qui tombent au contr√¥le</div>
      </div>
      <div class="content">
        <div class="card">
          <div class="row">
            <span class="pill"><span class="k">√Ä conna√Ætre</span> Lithosph√®re / Asth√©nosph√®re</span>
            <span class="pill"><span class="k">√Ä conna√Ætre</span> Dorsale / Fosse / Montagnes</span>
            <span class="pill"><span class="k">√Ä conna√Ætre</span> Risque = al√©a √ó enjeux</span>
          </div>

          <div class="hr"></div>

          <div class="two">
            <div class="card" style="margin:0">
              <b>1) Ondes sismiques (truc simple)</b>
              <p class="muted" style="margin:8px 0 0; line-height:1.55">
                Les ondes sismiques vont <b>plus vite</b> dans une roche <b>rigide</b> et <b>plus lentement</b>
                dans une roche <b>visqueuse</b>. Sur un graphique vitesse/profondeur, une baisse de vitesse
                fait penser √† une couche plus ‚Äúmolle‚Äù.
              </p>
              <p class="muted" style="margin:8px 0 0">
                üëâ <b>Lithosph√®re</b> = rigide (les plaques) ¬∑ <b>Asth√©nosph√®re</b> = visqueuse (support).
              </p>
            </div>

            <div class="card" style="margin:0">
              <b>2) Reliefs = limites de plaques</b>
              <ul class="muted" style="margin:8px 0 0; padding-left:18px; line-height:1.55">
                <li><b>Dorsale</b> : divergence ‚Üí <b>accr√©tion</b> (cr√©ation de cro√ªte) + volcanisme effusif.</li>
                <li><b>Fosse</b> : subduction ‚Üí gros s√©ismes + volcanisme explosif.</li>
                <li><b>Cha√Ænes de montagnes</b> : collision continent-continent ‚Üí montagnes + s√©ismes.</li>
              </ul>
            </div>
          </div>

          <div class="two">
            <div class="card" style="margin:0">
              <b>3) Volcans : effusif vs explosif</b>
              <p class="muted" style="margin:8px 0 0; line-height:1.55">
                Le <b>moteur</b> d‚Äôune √©ruption, ce sont les <b>gaz</b>.
                <br><span class="ok">Effusif</span> : magma fluide ‚Üí gaz sortent ‚Üí lave coule.
                <br><span class="bad">Explosif</span> : magma visqueux ‚Üí gaz bloqu√©s ‚Üí explosions, nu√©es ardentes.
              </p>
            </div>

            <div class="card" style="margin:0">
              <b>4) Risque sismique</b>
              <p class="muted" style="margin:8px 0 0; line-height:1.55">
                <b>Al√©a</b> = ‚Äúest-ce possible + quelle intensit√© ?‚Äù
                <br><b>Enjeux</b> = ‚Äúqu‚Äôest-ce qu‚Äôon peut perdre ?‚Äù
                <br><b>Risque</b> = <b>al√©a √ó enjeux</b>
              </p>
              <p class="muted" style="margin:8px 0 0">
                Pour limiter : <b>normes parasismiques</b>, <b>PPR</b>, informer, surveiller.
              </p>
            </div>
          </div>

          <div class="card">
            <b>5) Moteur des plaques (radioactivit√©)</b>
            <p class="muted" style="margin:8px 0 0; line-height:1.55">
              Certains √©l√©ments radioactifs (ex : <b>uranium</b>) lib√®rent de la <b>chaleur</b>.
              Cette chaleur entretient des <b>courants de convection</b> dans le manteau ‚Üí cela aide √†
              d√©placer les plaques.
            </p>
          </div>

          <div class="card">
            <b>6) Himalaya (histoire)</b>
            <p class="muted" style="margin:8px 0 0; line-height:1.55">
              L‚ÄôInde se d√©place vers le nord. Quand elle arrive contre l‚ÄôEurasie : <b>convergence</b> puis <b>collision</b>.
              La cro√ªte s‚Äô√©paissit ‚Üí <b>formation de l‚ÄôHimalaya</b>. La vitesse diminue au moment de la collision.
            </p>
          </div>

          <div class="row">
            <button class="good" type="button" id="btnMemoDone">‚úÖ J‚Äôai lu (donne un point)</button>
            <button type="button" id="btnGoFlash">‚û°Ô∏è Passer aux flashcards</button>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW: FLASHCARDS -->
    <section class="view" id="view-flash" style="display:none">
      <div class="sectionTitle">
        <h2>Flashcards (tap pour voir la r√©ponse)</h2>
        <div class="hint">Objectif : 10 cartes = 10 points</div>
      </div>
      <div class="content">
        <div class="card flash" id="flashCard" role="button" tabindex="0" aria-label="Carte m√©moire (cliquer pour retourner)">
          <div class="front" id="flashFront">Lithosph√®re ?</div>
          <div class="back" id="flashBack" style="display:none">
            Ensemble <b>rigide</b> (cro√ªte + haut manteau) formant les <b>plaques</b>.<small>Retiens : ‚ÄúPlaques = rigides‚Äù.</small>
          </div>
        </div>

        <div class="row">
          <button class="primary" type="button" id="btnPrevFlash">‚¨ÖÔ∏è</button>
          <button class="primary" type="button" id="btnNextFlash">‚û°Ô∏è</button>
          <button class="good" type="button" id="btnFlashPoint">+1 point</button>
          <span class="pill"><span class="k">Carte</span> <span id="flashIndex">1</span> / <span id="flashTotal">12</span></span>
        </div>

        <div class="card">
          <b>Mini d√©fi</b>
          <p class="muted" style="margin:8px 0 0; line-height:1.55">
            Fais une phrase avec le mot de la carte (√† voix haute). Exemple : ‚Äú√Ä la dorsale, les plaques divergent.‚Äù
          </p>
        </div>
      </div>
    </section>

    <!-- VIEW: QUIZ -->
    <section class="view" id="view-quiz" style="display:none">
      <div class="sectionTitle">
        <h2>Quiz (QCM + correction)</h2>
        <div class="hint">Objectif : 8/10 = ‚ÄúOK contr√¥le‚Äù</div>
      </div>
      <div class="content">
        <div class="card" id="quizBox">
          <p class="quizQ" id="quizQ">Question</p>
          <div class="opts" id="quizOpts"></div>
          <div class="feedback" id="quizFeedback" style="display:none"></div>
          <div class="row" style="margin-top:12px">
            <button class="primary" type="button" id="btnQuizCheck">V√©rifier</button>
            <button type="button" id="btnQuizNext">Suivante ‚û°Ô∏è</button>
            <span class="pill"><span class="k">Score</span> <span id="quizScore">0</span> / <span id="quizCount">10</span></span>
          </div>
        </div>

        <div class="card">
          <b>Astuce TDAH</b>
          <p class="muted" style="margin:8px 0 0">
            Lis la question, puis cherche le <b>mot-cl√©</b> (dorsale / fosse / collision / al√©a / enjeux / gaz).
          </p>
        </div>
      </div>
    </section>

    <!-- VIEW: MATCH -->
    <section class="view" id="view-match" style="display:none">
      <div class="sectionTitle">
        <h2>Associer (drag & drop)</h2>
        <div class="hint">Objectif : tout classer correctement</div>
      </div>
      <div class="content">
        <div class="card">
          <p class="muted" style="margin:0 0 10px; line-height:1.55">
            Glisse chaque √©tiquette dans la bonne bo√Æte. Puis clique <b>Corriger</b>.
          </p>
          <div class="dragWrap">
            <div class="bin" id="binA" data-bin="A" aria-label="Bo√Æte A">
              <h3>Dorsale / Divergence / Accr√©tion</h3>
            </div>
            <div class="bin" id="binB" data-bin="B" aria-label="Bo√Æte B">
              <h3>Subduction / Fosse / Explosif</h3>
            </div>
            <div class="bin" id="binC" data-bin="C" aria-label="Bo√Æte C">
              <h3>Collision / Montagnes</h3>
            </div>
            <div class="bin" id="binD" data-bin="D" aria-label="Bo√Æte D">
              <h3>Risque : Al√©a / Enjeux / Pr√©vention</h3>
            </div>
          </div>

          <div class="hr"></div>

          <div class="card" style="margin:0">
            <b>√âtiquettes</b>
            <div id="tagPool" aria-label="√âtiquettes √† d√©placer"></div>
            <div class="row" style="margin-top:12px">
              <button class="primary" type="button" id="btnMatchCheck">Corriger</button>
              <button type="button" id="btnMatchReset">Recommencer</button>
              <span class="pill"><span class="k">Bonnes</span> <span id="matchGood">0</span> / <span id="matchTotal">14</span></span>
            </div>
            <div class="feedback" id="matchFeedback" style="display:none"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW: CALC -->
    <section class="view" id="view-calc" style="display:none">
      <div class="sectionTitle">
        <h2>Calculs (simples, comme au contr√¥le)</h2>
        <div class="hint">Objectif : savoir faire ‚Äúdiff√©rence de temps‚Äù + ‚Äúrisque = al√©a √ó enjeux‚Äù</div>
      </div>
      <div class="content">
        <div class="card">
          <div class="calcGrid">
            <div class="card calc" style="margin:0">
              <b>1) Diff√©rence de temps (ondes)</b>
              <p class="muted" style="margin:8px 0 0; line-height:1.55">
                Un s√©isme a lieu √† <b>21:53:00</b>. Le signal arrive √† une station √† <b>21:55:39</b>.
                <br>Calcule le <b>d√©lai</b> en secondes.
              </p>
              <div class="eq" style="margin-top:10px">d√©lai = (heure arriv√©e) ‚àí (heure d√©part)</div>
              <div class="row" style="margin-top:10px">
                <input id="calc1" inputmode="numeric" placeholder="R√©ponse en secondes (ex : 159)" aria-label="R√©ponse calcul 1" />
                <button class="primary" type="button" data-calc="1">V√©rifier</button>
              </div>
              <div class="feedback" id="calcFb1" style="display:none"></div>
            </div>

            <div class="card calc" style="margin:0">
              <b>2) Risque = al√©a √ó enjeux</b>
              <p class="muted" style="margin:8px 0 0; line-height:1.55">
                On note l‚Äôal√©a sur 1 √† 5 et les enjeux sur 1 √† 5.
                <br>Si <b>al√©a = 3</b> et <b>enjeux = 5</b>, quel est le risque ?
              </p>
              <div class="eq" style="margin-top:10px">risque = 3 √ó 5</div>
              <div class="row" style="margin-top:10px">
                <input id="calc2" inputmode="numeric" placeholder="R√©ponse (un nombre)" aria-label="R√©ponse calcul 2" />
                <button class="primary" type="button" data-calc="2">V√©rifier</button>
              </div>
              <div class="feedback" id="calcFb2" style="display:none"></div>
            </div>
          </div>

          <div class="hr"></div>

          <div class="card">
            <b>3) D√©duction (bonus)</b>
            <p class="muted" style="margin:8px 0 0; line-height:1.55">
              Si la <b>vitesse des ondes</b> baisse brusquement √† une certaine profondeur, tu conclus plut√¥t :
              <br>üëâ couche <b>rigide</b> ou <b>visqueuse</b> ?
            </p>
            <div class="row">
              <button class="primary" type="button" id="btnCalc3Rigid">Rigide</button>
              <button class="primary" type="button" id="btnCalc3Visc">Visqueuse</button>
            </div>
            <div class="feedback" id="calcFb3" style="display:none"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW: ORDER -->
    <section class="view" id="view-order" style="display:none">
      <div class="sectionTitle">
        <h2>Puzzle ordre chronologique</h2>
        <div class="hint">Objectif : remettre ‚ÄúDorsale ‚Üí Subduction‚Äù dans le bon ordre</div>
      </div>
      <div class="content">
        <div class="card">
          <p class="muted" style="margin:0 0 10px; line-height:1.55">
            Utilise les fl√®ches ‚¨ÜÔ∏è ‚¨áÔ∏è pour remettre dans l‚Äôordre (du d√©but vers la fin).
          </p>

          <div id="orderList"></div>

          <div class="row">
            <button class="primary" type="button" id="btnOrderCheck">Corriger</button>
            <button type="button" id="btnOrderShuffle">M√©langer</button>
            <span class="pill"><span class="k">R√©sultat</span> <span id="orderResult">‚Äî</span></span>
          </div>

          <div class="feedback" id="orderFeedback" style="display:none"></div>
        </div>
      </div>
    </section>

    <!-- VIEW: BOSS -->
    <section class="view" id="view-boss" style="display:none">
      <div class="sectionTitle">
        <h2>Boss final (mix : 60 secondes)</h2>
        <div class="hint">Objectif : r√©pondre vite (comme en contr√¥le)</div>
      </div>
      <div class="content">
        <div class="card" id="bossBox">
          <div class="row" style="justify-content:space-between">
            <span class="pill"><span class="k">Temps</span> <span id="bossTime">60</span>s</span>
            <span class="pill"><span class="k">Points</span> <span id="bossPts">0</span></span>
          </div>

          <div class="hr"></div>

          <div id="bossTask"></div>

          <div class="row" style="margin-top:12px">
            <button class="good" type="button" id="btnBossStart">‚ñ∂Ô∏è Start</button>
            <button class="warn" type="button" id="btnBossStop">‚è∏Ô∏è Stop</button>
            <button type="button" id="btnBossNew">üîÅ Nouvelle √©preuve</button>
          </div>

          <div class="feedback" id="bossFeedback" style="display:none"></div>
        </div>

        <div class="card">
          <b>Conseil</b>
          <p class="muted" style="margin:8px 0 0">
            Si tu bloques, cherche d‚Äôabord : <b>limite de plaque ?</b> (dorsale / fosse / collision) puis associe les effets.
          </p>
        </div>
      </div>
    </section>
  </main>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>
<canvas class="confetti" id="confetti" width="10" height="10" aria-hidden="true"></canvas>

<footer>
  Fait pour r√©viser vite : clics, glisser-d√©poser, corrections imm√©diates. Tu peux copier-coller ce fichier en <b>.html</b> et l‚Äôouvrir dans un navigateur.
</footer>

<script>
  // -------------------------
  // Utilities (TDAH friendly)
  // -------------------------
  const $ = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
  const clamp = (n, a, b) => Math.max(a, Math.min(b, n));
  const pad2 = n => String(n).padStart(2,'0');

  function toast(msg){
    const t = $("#toast");
    t.textContent = msg;
    t.classList.add("show");
    clearTimeout(toast._tm);
    toast._tm = setTimeout(()=>t.classList.remove("show"), 1600);
  }

  // -------------------------
  // State + persistence
  // -------------------------
  const KEY = "svt_rev_tdah_v1";
  const state = load() || {
    scoreTotal: 0,
    streak: 0,
    objectivesDone: 0,
    objectivesMax: 30,
    focusMode: false,
    flashSeen: {},
    quiz: { idx: 0, score: 0, answered: {} },
    match: { done: false },
    order: { done: false },
    boss: { best: 0 }
  };

  function save(){ localStorage.setItem(KEY, JSON.stringify(state)); updateHUD(); }
  function load(){
    try{ return JSON.parse(localStorage.getItem(KEY)); }catch(e){ return null; }
  }

  function addScore(points, reason=""){
    state.scoreTotal += points;
    state.streak = points>0 ? state.streak+1 : 0;
    if(points>0) maybeObjective();
    save();
    if(points>0){
      toast(`+${points} point${points>1?"s":""}${reason? " ¬∑ " + reason : ""}`);
    }else{
      toast("Oups, on reprend üôÇ");
    }
  }
  function maybeObjective(){
    // Simple: every 5 points => +1 objective done (up to max)
    const target = Math.floor(state.scoreTotal / 5);
    state.objectivesDone = clamp(target, 0, state.objectivesMax);
  }

  function updateHUD(){
    $("#scoreTotal").textContent = state.scoreTotal;
    $("#streak").textContent = state.streak;
    $("#progressText").textContent = `${state.objectivesDone} / ${state.objectivesMax} objectifs`;
    $("#progressFill").style.width = `${(state.objectivesDone/state.objectivesMax)*100}%`;
    $("#btnBoost").textContent = state.focusMode ? "Mode Focus : ON" : "Mode Focus";
  }

  // -------------------------
  // Navigation
  // -------------------------
  const views = ["memo","flash","quiz","match","calc","order","boss"];
  function showView(name){
    $$(".view").forEach(v => v.style.display="none");
    $(`#view-${name}`).style.display="block";
    $$(".navbtn").forEach(b => b.classList.toggle("active", b.dataset.view === name));
    toast(`üìå ${bname(name)}`);
  }
  function bname(n){
    return ({
      memo:"M√©mo express",
      flash:"Flashcards",
      quiz:"Quiz",
      match:"Associer",
      calc:"Calculs",
      order:"Puzzle ordre",
      boss:"Boss final"
    })[n] || n;
  }

  $$(".navbtn").forEach(btn=>{
    btn.addEventListener("click", ()=> showView(btn.dataset.view));
  });

  // Keyboard shortcuts
  document.addEventListener("keydown", (e)=>{
    if(e.target && ["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)) return;
    const k = e.key.toLowerCase();
    const active = $(".navbtn.active")?.dataset.view || "memo";
    const i = views.indexOf(active);
    if(k === "n"){ showView(views[clamp(i+1,0,views.length-1)]); }
    if(k === "p"){ showView(views[clamp(i-1,0,views.length-1)]); }
    if(k === "r"){ hardReset(); }
  });

  // Reset
  function hardReset(){
    localStorage.removeItem(KEY);
    location.reload();
  }
  $("#btnReset").addEventListener("click", hardReset);

  // Focus mode (less text)
  $("#btnBoost").addEventListener("click", ()=>{
    state.focusMode = !state.focusMode;
    document.body.classList.toggle("focus", state.focusMode);
    // In focus mode, collapse muted paragraphs a bit
    $$(".muted").forEach(p=>{
      p.style.display = state.focusMode ? "none" : "";
    });
    toast(state.focusMode ? "Mode Focus activ√©" : "Mode Focus d√©sactiv√©");
    save();
  });

  // Restore focus mode
  if(state.focusMode){
    setTimeout(()=>$("#btnBoost").click(), 0); // toggles + saves; we already have it true, so quick toggle would invert
    // Instead: apply without toggling state
    state.focusMode = true;
    $$(".muted").forEach(p=> p.style.display = "none");
    $("#btnBoost").textContent = "Mode Focus : ON";
  }

  // -------------------------
  // Memo
  // -------------------------
  $("#btnMemoDone").addEventListener("click", ()=> addScore(1, "M√©mo lu"));
  $("#btnGoFlash").addEventListener("click", ()=> showView("flash"));

  // -------------------------
  // Flashcards
  // -------------------------
  const flashcards = [
    {q:"Lithosph√®re ?", a:"Ensemble <b>rigide</b> (cro√ªte + haut manteau) formant les <b>plaques</b>. <small>Retiens : plaques = rigides.</small>"},
    {q:"Asth√©nosph√®re ?", a:"Couche de roches <b>visqueuses</b> (manteau sup.) sur laquelle glissent les plaques. <small>Retiens : support ‚Äúmou‚Äù.</small>"},
    {q:"Ondes sismiques : vitesse ?", a:"Plus la roche est <b>rigide</b> ‚Üí ondes <b>plus rapides</b>. Roche <b>visqueuse</b> ‚Üí ondes <b>plus lentes</b>."},
    {q:"Dorsale = ?", a:"Limite de plaques en <b>divergence</b> : les plaques s‚Äô√©cartent ‚Üí <b>accr√©tion</b> (cr√©ation de cro√ªte oc√©anique)."},
    {q:"Subduction = ?", a:"Une plaque (souvent <b>oc√©anique</b>) <b>plonge</b> sous une autre ‚Üí <b>fosse</b>, s√©ismes, volcanisme <b>explosif</b>."},
    {q:"Collision = ?", a:"Deux plaques <b>continentales</b> se rencontrent ‚Üí <b>cha√Ænes de montagnes</b> + s√©ismes, peu/pas de volcans."},
    {q:"Risque = ?", a:"<b>Risque = al√©a √ó enjeux</b>. <small>Al√©a : probabilit√©/intensit√© ; enjeux : ce qu‚Äôon peut perdre.</small>"},
    {q:"Pr√©vention sismique ?", a:"<b>Normes parasismiques</b>, <b>PPR</b>, information, exercices, surveillance (sismom√®tres)."},
    {q:"Volcanisme effusif ?", a:"Magma <b>fluide</b> ‚Üí gaz sortent ‚Üí √©ruption calme, <b>coul√©es de lave</b>."},
    {q:"Volcanisme explosif ?", a:"Magma <b>visqueux</b> ‚Üí gaz bloqu√©s ‚Üí explosions, <b>nu√©es ardentes</b>, cendres."},
    {q:"Moteur des plaques ?", a:"Chaleur interne (ex : <b>radioactivit√©</b> de l‚Äôuranium) ‚Üí <b>convection</b> dans le manteau ‚Üí d√©placement des plaques."},
    {q:"Himalaya : pourquoi ?", a:"<b>Convergence</b> puis <b>collision</b> Inde/Eurasie ‚Üí √©paississement ‚Üí montagnes (vitesse de l‚ÄôInde diminue)."}
  ];
  let flashIdx = 0;
  $("#flashTotal").textContent = flashcards.length;

  function renderFlash(){
    const c = flashcards[flashIdx];
    $("#flashFront").textContent = c.q;
    $("#flashBack").innerHTML = c.a;
    $("#flashBack").style.display="none";
    $("#flashFront").style.display="block";
    $("#flashIndex").textContent = flashIdx+1;
  }
  renderFlash();

  function flipFlash(){
    const front = $("#flashFront");
    const back = $("#flashBack");
    const isFront = front.style.display !== "none";
    front.style.display = isFront ? "none" : "block";
    back.style.display  = isFront ? "block" : "none";
    // mark seen
    state.flashSeen[flashIdx] = true;
    save();
  }
  $("#flashCard").addEventListener("click", flipFlash);
  $("#flashCard").addEventListener("keydown", (e)=>{
    if(e.key === "Enter" || e.key === " "){ e.preventDefault(); flipFlash(); }
  });

  $("#btnPrevFlash").addEventListener("click", ()=>{ flashIdx = (flashIdx-1+flashcards.length)%flashcards.length; renderFlash(); });
  $("#btnNextFlash").addEventListener("click", ()=>{ flashIdx = (flashIdx+1)%flashcards.length; renderFlash(); });
  $("#btnFlashPoint").addEventListener("click", ()=>{
    addScore(1, "Flashcard");
  });

  // -------------------------
  // Quiz
  // -------------------------
  const quiz = [
    {
      q:"La lithosph√®re est surtout‚Ä¶",
      opts:["visqueuse","rigide","liquide","gazeuse"],
      a:1,
      exp:"Lithosph√®re = ensemble de roches <b>rigides</b> (plaques)."
    },
    {
      q:"√Ä une dorsale oc√©anique, les plaques‚Ä¶",
      opts:["se rapprochent","s‚Äô√©cartent","ne bougent pas","se chevauchent"],
      a:1,
      exp:"Dorsale = <b>divergence</b> ‚Üí accr√©tion (cr√©ation de cro√ªte)."
    },
    {
      q:"Subduction : on observe souvent‚Ä¶",
      opts:["fosses + volcanisme explosif","uniquement montagnes","aucun s√©isme","seulement volcanisme effusif"],
      a:0,
      exp:"Subduction ‚Üí <b>fosse</b> + s√©ismes + volcanisme <b>explosif</b>."
    },
    {
      q:"Risque sismique, c‚Äôest‚Ä¶",
      opts:["al√©a + enjeux","al√©a √ó enjeux","enjeux ‚àí al√©a","al√©a √∑ enjeux"],
      a:1,
      exp:"Formule attendue : <b>Risque = al√©a √ó enjeux</b>."
    },
    {
      q:"Une baisse de vitesse des ondes sismiques avec la profondeur indique plut√¥t‚Ä¶",
      opts:["une roche plus rigide","une roche plus visqueuse","un vide","de l‚Äôeau uniquement"],
      a:1,
      exp:"Roche visqueuse ‚Üí ondes <b>plus lentes</b>."
    },
    {
      q:"Le moteur d‚Äôune √©ruption volcanique est surtout‚Ä¶",
      opts:["la pluie","les gaz","la neige","les oc√©ans"],
      a:1,
      exp:"Le <b>gaz</b> met le magma en pression : effusif si √ßa s‚Äô√©chappe, explosif si c‚Äôest bloqu√©."
    },
    {
      q:"Volcanisme explosif : magma‚Ä¶",
      opts:["fluide, gaz sortent facilement","visqueux, gaz bloqu√©s","toujours sous-marin","toujours sans cendres"],
      a:1,
      exp:"Explosif = magma <b>visqueux</b> + gaz bloqu√©s ‚Üí explosions."
    },
    {
      q:"Les courants de convection dans le manteau sont favoris√©s par‚Ä¶",
      opts:["la chaleur interne (radioactivit√©)","le vent","la mar√©e","les animaux"],
      a:0,
      exp:"Chaleur interne (ex : radioactivit√© de l‚Äôuranium) ‚Üí <b>convection</b>."
    },
    {
      q:"L‚ÄôHimalaya s‚Äôexplique surtout par‚Ä¶",
      opts:["divergence √† une dorsale","collision Inde-Eurasie","subduction sous l‚Äôoc√©an Atlantique","un tsunami"],
      a:1,
      exp:"Convergence puis <b>collision</b> Inde/Eurasie ‚Üí √©paississement ‚Üí montagnes."
    },
    {
      q:"Pour limiter les d√©g√¢ts mat√©riels lors d‚Äôun s√©isme, on agit surtout avec‚Ä¶",
      opts:["normes parasismiques + PPR","plus de volcans","moins de m√©t√©o","plus de soleil"],
      a:0,
      exp:"Pr√©vention : <b>normes parasismiques</b>, <b>PPR</b>, information, exercices."
    }
  ];

  let quizIdx = state.quiz.idx || 0;
  let quizScore = state.quiz.score || 0;

  $("#quizCount").textContent = quiz.length;
  $("#quizScore").textContent = quizScore;

  function renderQuiz(){
    quizIdx = clamp(quizIdx, 0, quiz.length-1);
    const item = quiz[quizIdx];
    $("#quizQ").textContent = `(${quizIdx+1}/${quiz.length}) ${item.q}`;
    const box = $("#quizOpts");
    box.innerHTML = "";
    item.opts.forEach((txt, i)=>{
      const id = `q${quizIdx}_o${i}`;
      const div = document.createElement("label");
      div.className = "opt";
      div.innerHTML = `
        <input type="radio" name="quizOpt" value="${i}" id="${id}">
        <div><b>${String.fromCharCode(65+i)}.</b> ${txt}</div>
      `;
      box.appendChild(div);
    });
    $("#quizFeedback").style.display="none";
  }
  renderQuiz();

  function checkQuiz(){
    const sel = $('input[name="quizOpt"]:checked');
    if(!sel){ shake($("#quizBox")); toast("Choisis une r√©ponse üôÇ"); return; }
    const choice = Number(sel.value);
    const item = quiz[quizIdx];
    const ok = choice === item.a;

    const fb = $("#quizFeedback");
    fb.style.display = "block";
    fb.innerHTML = ok
      ? `<span class="ok">‚úÖ Correct.</span> ${item.exp}`
      : `<span class="bad">‚ùå Faux.</span> La bonne r√©ponse est <b>${String.fromCharCode(65+item.a)}</b>. ${item.exp}`;

    // only score first time for that question
    if(!state.quiz.answered[quizIdx]){
      state.quiz.answered[quizIdx] = true;
      if(ok){ quizScore += 1; addScore(1, "Quiz"); }
      else { addScore(0); }
      state.quiz.score = quizScore;
      $("#quizScore").textContent = quizScore;
      save();
    }
  }

  $("#btnQuizCheck").addEventListener("click", checkQuiz);
  $("#btnQuizNext").addEventListener("click", ()=>{
    quizIdx = (quizIdx+1) % quiz.length;
    state.quiz.idx = quizIdx;
    save();
    renderQuiz();
  });

  function shake(el){ el.classList.remove("shake"); void el.offsetWidth; el.classList.add("shake"); }

  // -------------------------
  // Match (drag & drop)
  // -------------------------
  const tagsData = [
    {t:"Divergence", bin:"A"},
    {t:"Accr√©tion", bin:"A"},
    {t:"Dorsale", bin:"A"},
    {t:"Cr√©ation de cro√ªte", bin:"A"},
    {t:"Subduction", bin:"B"},
    {t:"Fosse oc√©anique", bin:"B"},
    {t:"Volcanisme explosif", bin:"B"},
    {t:"S√©ismes profonds possibles", bin:"B"},
    {t:"Collision", bin:"C"},
    {t:"Cha√Ænes de montagnes", bin:"C"},
    {t:"Al√©a", bin:"D"},
    {t:"Enjeux", bin:"D"},
    {t:"Normes parasismiques", bin:"D"},
    {t:"PPR", bin:"D"},
  ];

  function buildTags(){
    const pool = $("#tagPool");
    pool.innerHTML = "";
    // shuffle
    const shuffled = [...tagsData].sort(()=>Math.random()-0.5);
    shuffled.forEach((x, idx)=>{
      const span = document.createElement("span");
      span.className = "tag";
      span.textContent = x.t;
      span.draggable = true;
      span.dataset.bin = x.bin;
      span.dataset.id = String(idx) + "_" + x.t;
      span.addEventListener("dragstart", (e)=>{
        e.dataTransfer.setData("text/plain", span.dataset.id);
        e.dataTransfer.setData("bin", x.bin);
        e.dataTransfer.setData("label", x.t);
      });
      pool.appendChild(span);
    });
    $("#matchTotal").textContent = tagsData.length;
    $("#matchGood").textContent = "0";
    $("#matchFeedback").style.display="none";

    // clear bins
    ["A","B","C","D"].forEach(b=>{
      const bin = document.querySelector(`[data-bin="${b}"]`);
      // keep title
      const title = bin.querySelector("h3").outerHTML;
      bin.innerHTML = title;
    });
  }

  function enableBins(){
    $$(".bin").forEach(bin=>{
      bin.addEventListener("dragover",(e)=>{ e.preventDefault(); });
      bin.addEventListener("drop",(e)=>{
        e.preventDefault();
        const label = e.dataTransfer.getData("label");
        const correctBin = e.dataTransfer.getData("bin");
        const targetBin = bin.dataset.bin;

        // find the tag in pool by label + dataset
        const tagEl = $$(".tag").find(t => t.textContent === label && t.dataset.bin === correctBin);
        if(!tagEl) return;

        // move tag
        bin.appendChild(tagEl);
        toast("D√©pos√© !");
      });
    });
  }

  buildTags();
  enableBins();

  $("#btnMatchReset").addEventListener("click", buildTags);

  $("#btnMatchCheck").addEventListener("click", ()=>{
    let good = 0;
    $$(".bin").forEach(bin=>{
      const targetBin = bin.dataset.bin;
      $$(".tag", bin).forEach(tag=>{
        const ok = tag.dataset.bin === targetBin;
        tag.classList.remove("good","bad");
        tag.classList.add(ok ? "good" : "bad");
        if(ok) good++;
      });
    });
    $("#matchGood").textContent = String(good);
    const fb = $("#matchFeedback");
    fb.style.display="block";
    if(good === tagsData.length){
      fb.innerHTML = `<span class="ok">‚úÖ Parfait !</span> Tout est bien class√©.`;
      addScore(3, "Associer");
      confettiBurst();
    }else{
      fb.innerHTML = `<span class="bad">‚ùå</span> Il y a ${tagsData.length-good} erreur(s). Les √©tiquettes rouges sont √† d√©placer.`;
      addScore(0);
    }
  });

  // -------------------------
  // Calculs
  // -------------------------
  function showCalcFb(id, ok, html){
    const el = $(`#calcFb${id}`);
    el.style.display="block";
    el.innerHTML = ok ? `<span class="ok">‚úÖ</span> ${html}` : `<span class="bad">‚ùå</span> ${html}`;
  }

  $$('button[data-calc]').forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const id = btn.dataset.calc;
      if(id==="1"){
        // 21:53:00 -> 21:55:39 = 2 min 39 s = 159 s
        const v = Number($("#calc1").value.replace(",",".").trim());
        if(!Number.isFinite(v)){ shake($("#calc1")); toast("Entre un nombre üôÇ"); return; }
        const ok = v === 159;
        if(ok){ addScore(2, "Calcul"); confettiBurst(); }
        else { addScore(0); }
        showCalcFb(1, ok, `21:55:39 ‚àí 21:53:00 = 2 min 39 s = <b>159 s</b>.`);
      }
      if(id==="2"){
        const v = Number($("#calc2").value.replace(",",".").trim());
        if(!Number.isFinite(v)){ shake($("#calc2")); toast("Entre un nombre üôÇ"); return; }
        const ok = v === 15;
        if(ok){ addScore(2, "Calcul"); }
        else { addScore(0); }
        showCalcFb(2, ok, `Risque = 3 √ó 5 = <b>15</b>.`);
      }
    });
  });

  $("#btnCalc3Rigid").addEventListener("click", ()=>{
    addScore(0);
    $("#calcFb3").style.display="block";
    $("#calcFb3").innerHTML = `<span class="bad">‚ùå</span> Si la vitesse <b>baisse</b>, la couche est plut√¥t <b>visqueuse</b>.`;
  });
  $("#btnCalc3Visc").addEventListener("click", ()=>{
    addScore(2, "D√©duction");
    $("#calcFb3").style.display="block";
    $("#calcFb3").innerHTML = `<span class="ok">‚úÖ</span> Oui : vitesse plus lente ‚Üí roche plus <b>visqueuse</b> (asth√©nosph√®re).`;
    confettiBurst();
  });

  // -------------------------
  // Order puzzle
  // -------------------------
  const correctOrder = [
    "Dorsale : divergence (cr√©ation de cro√ªte oc√©anique)",
    "La lithosph√®re oc√©anique s‚Äô√©loigne et refroidit (devient plus dense)",
    "Subduction : la plaque oc√©anique plonge (fosse + s√©ismes)",
    "Volcanisme explosif au-dessus de la zone de subduction",
    "Cha√Æne de montagnes / reliefs li√©s √† la convergence"
  ];
  let orderItems = [];

  function renderOrder(){
    const list = $("#orderList");
    list.innerHTML = "";
    orderItems.forEach((txt, idx)=>{
      const row = document.createElement("div");
      row.className = "orderItem";
      row.innerHTML = `
        <div>
          <div class="small">Position ${idx+1}</div>
          <div class="name">${txt}</div>
        </div>
        <div class="btns">
          <button type="button" data-up="${idx}">‚¨ÜÔ∏è</button>
          <button type="button" data-down="${idx}">‚¨áÔ∏è</button>
        </div>
      `;
      list.appendChild(row);
    });

    $$("button[data-up]").forEach(b=> b.addEventListener("click", ()=>{
      const i = Number(b.dataset.up);
      if(i<=0) return;
      [orderItems[i-1], orderItems[i]] = [orderItems[i], orderItems[i-1]];
      renderOrder();
    }));
    $$("button[data-down]").forEach(b=> b.addEventListener("click", ()=>{
      const i = Number(b.dataset.down);
      if(i>=orderItems.length-1) return;
      [orderItems[i+1], orderItems[i]] = [orderItems[i], orderItems[i+1]];
      renderOrder();
    }));
  }

  function shuffleOrder(){

